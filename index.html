<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>The Money Problem in Major League Baseball</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <link rel="stylesheet" href="style.css" />
    <style>
        .intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            overflow: hidden;
        }

        .intro-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 900px;
            padding: 20px;
            text-align: center;
        }

        .intro-slide {
            position: absolute;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .intro-slide.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Baseball field background animation */
        .field-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            opacity: 0.03;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><path d="M200 350 L100 250 L200 50 L300 250 Z" fill="none" stroke="white" stroke-width="1"/><circle cx="200" cy="250" r="30" fill="none" stroke="white" stroke-width="1"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            animation: fieldRotate 60s linear infinite;
        }

        @keyframes fieldRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Money falling animation */
        .money-rain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .dollar-bill {
            position: absolute;
            font-size: 24px;
            color: #22c55e;
            animation: fall linear infinite;
            opacity: 0.6;
        }

        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Enhanced title styles */
        .intro-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5)); }
            to { filter: drop-shadow(0 0 40px rgba(255, 215, 0, 0.8)); }
        }

        .intro-subtitle {
            font-size: 1.4rem;
            margin-bottom: 30px;
            opacity: 0.9;
            line-height: 1.6;
        }

        /* Enhanced team comparison */
        .team-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin: 40px 0;
            width: 100%;
            max-width: 800px;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            transform: scale(0);
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .team-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.8s;
        }

        .team-card:hover::before {
            left: 100%;
        }

        .team-card.show {
            transform: scale(1);
        }

        .team-card.poor {
            border-color: #ef4444;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
        }

        .team-card.rich {
            border-color: #22c55e;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
        }

        .team-logo-large {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 20px rgba(255, 255, 255, 0.3));
        }

        .team-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            margin: 15px 0;
        }

        .stat-number.payroll {
            color: #FFD700;
        }

        .stat-number.wins {
            color: #60a5fa;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        /* Dramatic comparison section */
        .vs-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 40px 0;
        }

        .vs-text {
            font-size: 4rem;
            font-weight: bold;
            color: #ff6b6b;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .shocking-stat {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff6b6b;
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            border: 3px solid #ff6b6b;
            border-radius: 15px;
            background: rgba(255, 107, 107, 0.1);
            animation: shockPulse 3s infinite;
        }

        @keyframes shockPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 107, 107, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 107, 107, 0.8); }
        }

        /* Salary visualization */
        .salary-viz {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 40px 0;
            gap: 30px;
        }

        .salary-bar {
            height: 40px;
            background: linear-gradient(90deg, #22c55e, #16a34a);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: all 1s ease;
            transform: scaleX(0);
            transform-origin: left;
        }

        .salary-bar.animate {
            transform: scaleX(1);
        }

        .salary-bar.small {
            width: 100px;
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        .salary-bar.large {
            width: 400px;
        }

        /* Question reveal */
        .question-reveal {
            font-size: 2.8rem;
            font-weight: bold;
            color: #FFD700;
            text-align: center;
            line-height: 1.3;
            margin: 40px 0;
            text-shadow: 0 2px 20px rgba(255, 215, 0, 0.6);
        }

        .question-reveal .highlight {
            color: #ff6b6b;
            font-size: 3.2rem;
        }

        /* Enhanced explore button */
        .explore-btn {
            padding: 20px 50px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF6B6B 100%);
            color: #000;
            border: none;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
            box-shadow: 0 6px 30px rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .explore-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .explore-btn:hover::before {
            left: 100%;
        }

        .explore-btn.show {
            opacity: 1;
            transform: translateY(0);
        }

        .explore-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6);
        }

        /* Progress bar */
        .progress-bar {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            width: 0;
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        /* Reality check section */
        .reality-check {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #ff6b6b;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            max-width: 600px;
        }

        .reality-title {
            font-size: 1.8rem;
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .reality-fact {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        /* Skip instruction */
        .skip-instruction {
            position: absolute;
            bottom: 80px;
            right: 30px;
            font-size: 0.9rem;
            opacity: 0.6;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 50%, 100% { opacity: 0.6; }
            25%, 75% { opacity: 0.3; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .intro-title { font-size: 2.5rem; }
            .team-comparison { 
                grid-template-columns: 1fr; 
                gap: 30px; 
            }
            .salary-viz { 
                flex-direction: column; 
                gap: 15px; 
            }
            .salary-bar.large { width: 300px; }
            .question-reveal { font-size: 2rem; }
            .shocking-stat { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
<div id="intro-screen" class="intro-screen">
    <div class="field-bg"></div>
    <div class="money-rain" id="money-rain"></div>
    
    <!-- Slide 1: Hook - The American Dream vs Reality -->
    <div class="intro-slide" id="slide-1">
        <h1 class="intro-title">The American Dream?</h1>
        <p class="intro-subtitle">In America, we believe that hard work and talent should determine success.</p>
        <p class="intro-subtitle">But what happens when money becomes the deciding factor?</p>
        <div style="margin-top: 40px;">
            <img src="logos/mlb.png" style="width: 120px; opacity: 0.8;" alt="MLB Logo">
        </div>
    </div>

    <!-- Slide 2: The Setting -->
    <div class="intro-slide" id="slide-2">
        <h2 style="font-size: 2.5rem; margin-bottom: 30px;">Major League Baseball</h2>
        <p class="intro-subtitle">30 teams. 162 games per season. One championship.</p>
        <p class="intro-subtitle">Every spring, fans believe their team has a chance...</p>
        <div class="shocking-stat" style="margin-top: 40px;">
            But do they <em>really</em>?
        </div>
    </div>

    <!-- Slide 3: The Shocking Reality -->
    <div class="intro-slide" id="slide-3">
        <h2 style="font-size: 2.5rem; margin-bottom: 30px; color: #ff6b6b;">The Harsh Reality</h2>
        <div class="salary-viz">
            <div>
                <div style="text-align: center; margin-bottom: 10px;">Lowest Payroll</div>
                <div class="salary-bar small" id="salary-low">$60M</div>
            </div>
            <div class="vs-text">VS</div>
            <div>
                <div style="text-align: center; margin-bottom: 10px;">Highest Payroll</div>
                <div class="salary-bar large" id="salary-high">$280M</div>
            </div>
        </div>
        <div class="shocking-stat">
            That's a <span style="color: #FFD700;">4.6x</span> difference!
        </div>
    </div>

    <!-- Slide 4: Real Team Comparison -->
    <div class="intro-slide" id="slide-4">
        <h2 style="font-size: 2rem; margin-bottom: 20px;">Meet Two Real Teams</h2>
        <div class="team-comparison">
            <div class="team-card poor" id="athletics-card">
                <img src="logos/athletics.png" class="team-logo-large" alt="Athletics">
                <h3 class="team-name">Oakland Athletics</h3>
                <div class="stat-label">Average Payroll</div>
                <div class="stat-number payroll">$65.6M</div>
                <div class="stat-label">Average Wins</div>
                <div class="stat-number wins">66</div>
                <div style="margin-top: 20px; font-style: italic; opacity: 0.8;">
                    "Small market team"
                </div>
            </div>
            <div class="team-card rich" id="dodgers-card">
                <img src="logos/dodgers.png" class="team-logo-large" alt="Dodgers">
                <h3 class="team-name">Los Angeles Dodgers</h3>
                <div class="stat-label">Average Payroll</div>
                <div class="stat-number payroll">$254.1M</div>
                <div class="stat-label">Average Wins</div>
                <div class="stat-number wins">104</div>
                <div style="margin-top: 20px; font-style: italic; opacity: 0.8;">
                    "Big market powerhouse"
                </div>
            </div>
        </div>
        <div style="text-align: center; margin-top: 30px; font-size: 1.3rem;">
            The Dodgers spend <strong style="color: #ff6b6b;">4x more</strong> and win <strong style="color: #60a5fa;">38 more games</strong> per season
        </div>
    </div>

    <!-- Slide 5: The Human Impact -->
    <div class="intro-slide" id="slide-5">
        <h2 style="font-size: 2.2rem; margin-bottom: 30px;">What This Really Means</h2>
        <div class="reality-check">
            <div class="reality-title">For Fans:</div>
            <div class="reality-fact">â€¢ Your team's budget determines your hope</div>
            <div class="reality-fact">â€¢ Some fans start each season already defeated</div>
            <div class="reality-fact">â€¢ Championships become predictable</div>
        </div>
        <div class="reality-check" style="border-color: #22c55e; background: rgba(34, 197, 94, 0.1);">
            <div class="reality-title" style="color: #22c55e;">For Players:</div>
            <div class="reality-fact">â€¢ Talent alone isn't enough</div>
            <div class="reality-fact">â€¢ Where you play determines your success</div>
            <div class="reality-fact">â€¢ The playing field isn't level</div>
        </div>
    </div>

    <!-- Slide 6: But Wait... -->
    <div class="intro-slide" id="slide-6">
        <h2 style="font-size: 2.5rem; margin-bottom: 30px; color: #FFD700;">But Wait...</h2>
        <p class="intro-subtitle">What if we told you that some of baseball's biggest spenders...</p>
        <p class="intro-subtitle" style="color: #ff6b6b; font-weight: bold; font-size: 1.8rem;">...still lose?</p>
        <p class="intro-subtitle">And some small-budget teams occasionally shock the world?</p>
        <div style="margin-top: 40px; font-size: 1.5rem; font-style: italic; opacity: 0.9;">
            Maybe money doesn't <em>always</em> buy championships...
        </div>
    </div>

    <!-- Slide 7: The Big Question -->
    <div class="intro-slide" id="slide-7">
        <div class="question-reveal">
            So here's the <span class="highlight">million dollar</span> question:
        </div>
        <div class="question-reveal" style="margin-top: 30px; font-size: 3.5rem;">
            Does money <em>always</em><br>buy wins in baseball?
        </div>
        <button id="explore-btn" class="explore-btn">Let's Find Out</button>
    </div>

    <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
    </div>
    
    <div class="skip-instruction">
        Press SPACE or ESC to skip
    </div>
</div>

<header>
    <h1>The Money Problem in Major League Baseball</h1>
</header>

<div id="map-container">
    <div class="dropdown" style="left: 10px; right: auto;">
        <button class="dropdown-btn">Filters â–¼</button>
        <div class="dropdown-content" style="right: auto; left: 0;">
            <div class="filter-group">
                <h3>League <button class="select-all" data-filter="league">Select All</button></h3>
                <label class="filter-option"><input type="checkbox" class="league-filter" value="AL" checked> American League</label>
                <label class="filter-option"><input type="checkbox" class="league-filter" value="NL" checked> National League</label>
            </div>
            <div class="filter-group">
                <h3>Division <button class="select-all" data-filter="division">Select All</button></h3>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="AL West" checked> AL West</label>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="AL East" checked> AL East</label>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="AL Central" checked> AL Central</label>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="NL West" checked> NL West</label>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="NL East" checked> NL East</label>
                <label class="filter-option"><input type="checkbox" class="division-filter" value="NL Central" checked> NL Central</label>
            </div>
            <div class="filter-group">
                <h3>Pay Tier <button class="select-all" data-filter="pay-tier">Select All</button></h3>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="1" checked> 5 Highest Payrolls</label>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="2" checked> 6-10</label>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="3" checked> 11-15</label>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="4" checked> 16-20</label>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="5" checked> 21-25</label>
                <label class="filter-option"><input type="checkbox" class="pay-tier-filter" value="6" checked> 5 Cheapest Payrolls</label>
            </div>
        </div>
    </div>
    <div id="map"></div>
</div>

<script>
// Enhanced intro animation script
document.addEventListener("DOMContentLoaded", () => {
    const introScreen = document.getElementById("intro-screen");

    // If intro has already been shown this session, skip it
    if (sessionStorage.getItem("introShown")) {
        introScreen.remove();
        setTimeout(() => {
            if (typeof animateTeamLogos === 'function') {
                animateTeamLogos();
            }
        }, 100);
        return;
    }

    const slides = document.querySelectorAll('.intro-slide');
    const progressFill = document.getElementById('progress-fill');
    const exploreBtn = document.getElementById('explore-btn');
    const moneyRain = document.getElementById('money-rain');
    
    let currentSlide = 0;
    const totalSlides = slides.length;
    const slideDuration = 5000; // 5 seconds per slide
    let slideTimeout;
    
    // Create money rain effect
    function createMoneyRain() {
        const symbols = ['$', 'ðŸ’°', 'ðŸ’¸', 'ðŸ’µ'];
        for (let i = 0; i < 15; i++) {
            setTimeout(() => {
                const dollar = document.createElement('div');
                dollar.className = 'dollar-bill';
                dollar.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                dollar.style.left = Math.random() * 100 + '%';
                dollar.style.animationDuration = (Math.random() * 3 + 4) + 's';
                dollar.style.animationDelay = Math.random() * 2 + 's';
                moneyRain.appendChild(dollar);
                
                // Remove after animation
                setTimeout(() => {
                    if (dollar.parentNode) {
                        dollar.parentNode.removeChild(dollar);
                    }
                }, 8000);
            }, i * 200);
        }
    }
    
    // Function to show a slide
    function showSlide(index) {
        // Clear any existing timeout
        if (slideTimeout) clearTimeout(slideTimeout);
        
        // Hide all slides
        slides.forEach(slide => slide.classList.remove('show'));
        
        // Show current slide
        if (slides[index]) {
            slides[index].classList.add('show');
            
            // Special animations for specific slides
            if (index === 0) {
                // Start money rain on first slide
                createMoneyRain();
                setInterval(createMoneyRain, 8000);
            }
            
            if (index === 2) {
                // Animate salary bars
                setTimeout(() => {
                    document.getElementById('salary-low').classList.add('animate');
                }, 1000);
                setTimeout(() => {
                    document.getElementById('salary-high').classList.add('animate');
                }, 2000);
            }
            
            if (index === 3) {
                // Animate team cards
                setTimeout(() => {
                    document.getElementById('athletics-card').classList.add('show');
                }, 800);
                setTimeout(() => {
                    document.getElementById('dodgers-card').classList.add('show');
                }, 1500);
            }
            
            if (index === 6) {
                // Show explore button
                setTimeout(() => {
                    exploreBtn.classList.add('show');
                }, 2000);
            }
        }
        
        // Update progress bar
        const progress = ((index + 1) / totalSlides) * 100;
        progressFill.style.width = progress + '%';
        
        // Set timeout for next slide (except last slide)
        if (index < totalSlides - 1) {
            slideTimeout = setTimeout(() => {
                currentSlide++;
                showSlide(currentSlide);
            }, slideDuration);
        }
    }
    
    // Start the slideshow
    showSlide(0);
    
    // Handle explore button click
    exploreBtn.addEventListener('click', () => {
        introScreen.style.transition = 'opacity 1.5s ease';
        introScreen.style.opacity = '0';
        
        setTimeout(() => {
            introScreen.remove();
            sessionStorage.setItem('introShown', 'true');
            setTimeout(() => {
                if (typeof animateTeamLogos === 'function') {
                    animateTeamLogos();
                }
            }, 100);
        }, 1500);
    });
    
    // Skip intro on keypress
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' || e.key === ' ') {
            if (slideTimeout) clearTimeout(slideTimeout);
            currentSlide = totalSlides - 1;
            showSlide(currentSlide);
        }
    });
    
    // Allow clicking to advance slides
    document.addEventListener('click', (e) => {
        if (e.target !== exploreBtn && currentSlide < totalSlides - 1) {
            if (slideTimeout) clearTimeout(slideTimeout);
            currentSlide++;
            showSlide(currentSlide);
        }
    });
});
document.addEventListener("DOMContentLoaded", () => {
    const dropdown = document.querySelector('.dropdown');
    const button = dropdown.querySelector('.dropdown-btn');
    const content = dropdown.querySelector('.dropdown-content');

    let isHovered = false;

    // Toggle on click
    button.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdown.classList.toggle('show');
    });

    // Stay open when hovered
    dropdown.addEventListener('mouseenter', () => {
        isHovered = true;
        dropdown.classList.add('show');
    });

    dropdown.addEventListener('mouseleave', () => {
        isHovered = false;
        // Delay hiding to allow mouse to move between elements
        setTimeout(() => {
            if (!isHovered) dropdown.classList.remove('show');
        }, 200);
    });

    // Close when clicking outside
    document.addEventListener('click', () => {
        if (!isHovered) dropdown.classList.remove('show');
    });

    // Prevent closing when clicking inside content
    content.addEventListener('click', e => e.stopPropagation());
});


</script>

<script src="main.js"></script>
</body>
</html>